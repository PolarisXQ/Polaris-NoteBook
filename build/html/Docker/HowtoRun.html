<!DOCTYPE html>
<html  lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

      <title>Some Useful Command</title>
    
          <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
          <link rel="stylesheet" href="../_static/theme.css " type="text/css" />
          <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      
      <!-- sphinx script_files -->
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/translations.js"></script>

      
      <!-- bundled in js (rollup iife) -->
      <!-- <script src="../_static/theme-vendors.js"></script> -->
      <script src="../_static/theme.js" defer></script>
    
      <link rel="shortcut icon" href="../_static/madcat_mini.png"/>
  <link rel="index" title="索引" href="../genindex.html" />
  <link rel="search" title="搜索" href="../search.html" />
  <link rel="prev" title="Docker" href="../Docker.html" /> 
  </head>

  <body>
    <div id="app">
    <div class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="../index.html" class="home-link">
    
      <img class="logo" src="../_static/madcat_mini.png" alt="logo"/>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">



  
    <div class="nav-item">
      <a href="https://github.com/PolarisXQ"
        class="nav-link external">
          Github <outboundlink></outboundlink>
      </a>
    </div>
  

    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            



  
    <div class="nav-item">
      <a href="https://github.com/PolarisXQ"
        class="nav-link external">
          Github <outboundlink></outboundlink>
      </a>
    </div>
  

            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">快速搜索</span>
    <div class="searchformwrapper">
      <form class="search" action="../search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="搜索" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../index.html#welcome-to-polaris-notebook">welcome to polaris' notebook!</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 ">
            
              <a href="../Sys.html" class="reference internal ">Sys</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="../SLAM.html" class="reference internal ">SLAM</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="../Docker.html" class="reference internal ">Docker</a>
            

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      <li><a href="../Docker.html">Docker</a> &raquo;</li>
    
    <li>Some Useful Command</li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="../Docker.html"
       title="上一章">← Docker</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main" v-pre>
            
  <section id="some-useful-command">
<h1>Some Useful Command<a class="headerlink" href="#some-useful-command" title="此标题的永久链接">¶</a></h1>
<section id="how-to-run-a-container">
<h2>How to Run a Container<a class="headerlink" href="#how-to-run-a-container" title="此标题的永久链接">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span><span class="o">[</span>option<span class="o">]</span><span class="w"> </span><span class="o">[</span>image_name<span class="o">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>–gpus all 要在主机上安装 NVIDIA Container Toolkit</p>
<ul>
<li><p>all：在容器内启用所有可用的GPU设备</p></li>
<li><p>0,1,2：在容器内启用指定的GPU设备，这里的数字表示GPU设备的索引号</p></li>
<li><p>gpu-model-name:3：在容器内启用指定型号和数量的GPU设备，这里的 gpu-model-name 是GPU设备型号的名称，数字 3 表示要启用3个该型号的GPU设备</p></li>
</ul>
</li>
<li><p>-name: name for container</p></li>
<li><p>-it: 分配一个伪终端并保持STDIN打开，以便您可以与容器进行交互</p></li>
<li><p>-d: 让容器在后台运行</p></li>
<li><p>-v 挂载一个卷（volume）到容器中，文件同步修改</p>
<ul>
<li><p><span style="color:purple;">【Windows format】E:\file\path\in\host:/home/file/path/in/container</span></p></li>
</ul>
</li>
<li><p>-e: 设置环境变量</p>
<ul>
<li><p><span style="color:purple;">Windos中设置docker内端口转发到xlaunch中的方法:  DISPLAY=host.docker.internal:0.0</span></p></li>
<li><p>NVIDIA_DRIVER_CAPABILITIES=all 选项是为了在容器中启用NVIDIA GPU加速，以便在容器内运行需要GPU的应用程序。</p></li>
</ul>
</li>
<li><p>–ipc：表示容器使用主机的 IPC（进程间通信）命名空间。</p></li>
<li><p>–privileged：表示容器将以特权模式运行，可以访问主机的所有设备和文件系统。特别是显卡！！！</p></li>
<li><p>-net 选项是为了将容器连接到网络</p></li>
</ul>
</section>
<section id="option-for-ros">
<h2>OPTION FOR ROS<a class="headerlink" href="#option-for-ros" title="此标题的永久链接">¶</a></h2>
<p><strong>To make two container communicate with each other：</strong></p>
<p>in container A， run roscore with a specific URI and net;
in container B &amp; C, connet to container A with the same net, ros-master URI;
so B&amp;C are using the same roscore and share the same network</p>
<p>-e ROS_MASTER_URI=http://ros-master:11311</p>
</section>
<section id="example">
<h2>EXAMPLE<a class="headerlink" href="#example" title="此标题的永久链接">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-v<span class="w"> </span>E:<span class="se">\r</span>obotics<span class="se">\o</span>rbslam2_learn:/home/orbslam2<span class="w"> </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span>host.docker.internal:0.0<span class="w"> </span>-dit<span class="w"> </span>thiagofalcao/opencv3
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-dit<span class="w"> </span>--name<span class="w"> </span>sim-server<span class="w"> </span>--network<span class="w"> </span>net-sim<span class="w"> </span>^
<span class="w">	</span>--gpus<span class="w"> </span>all<span class="w"> </span>^
<span class="w">	</span>-e<span class="w"> </span><span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://ros-master:11311<span class="w"> </span>^
<span class="w">	</span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span>^%DISPLAY%<span class="w"> </span>^
<span class="w">	</span>-e<span class="w"> </span><span class="nv">QT_X11_NO_MITSHM</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>^
<span class="w">	</span>-e<span class="w"> </span><span class="nv">NO_AT_BRIDGE</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>^
<span class="w">	</span>-e<span class="w"> </span><span class="nv">LIBGL_ALWAYS_SOFTWARE</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>^
<span class="w">	</span>-e<span class="w"> </span><span class="nv">NVIDIA_DRIVER_CAPABILITIES</span><span class="o">=</span>all<span class="w"> </span>^
<span class="w">	</span>-v<span class="w"> </span>/tmp/.X11-unix:/tmp/.X11-unix<span class="w"> </span>^
<span class="w">	</span>%SERVER_IMAGE%<span class="w"> </span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-dit<span class="w"> </span>--network<span class="w"> </span>net-sim<span class="w"> </span>--gpus<span class="w"> </span>all<span class="w"> </span>-e<span class="w"> </span><span class="nv">NVIDIA_DRIVER_CAPABILITIES</span><span class="o">=</span>all<span class="w"> </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span>host.docker.internal:0.0<span class="w"> </span>sg-slam
</pre></div>
</div>
</section>
<section id="how-to-commit">
<h2>How to Commit<a class="headerlink" href="#how-to-commit" title="此标题的永久链接">¶</a></h2>
<p>现在，我们需要将容器中的更改更新到原始镜像。首先，我们需要获取容器 ID：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>ps<span class="w"> </span>-l
</pre></div>
</div>
<p>找到容器 ID 后，可以使用以下命令生成一个新的镜像：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>commit<span class="w"> </span>CONTAINER_ID<span class="w"> </span>NEW_IMAGE_NAME<span class="o">[</span>:tag<span class="o">(</span>latest<span class="o">)]</span>
</pre></div>
</div>
</section>
</section>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="../Docker.html"
       title="上一章">← Docker</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; 版权所有 2023, PolarisXQ.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a> 0.8.0.
</div>
            </div>
          </div>
      </page>
    </div></div>
    
    
  </body>
</html>